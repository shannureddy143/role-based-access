<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RBAC Login</title>
<style>
  body { font-family: Arial; display: flex; justify-content: center; align-items: center; height: 100vh; background:#f0f0f0; }
  #login-container { background:white; padding:30px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,0.1); width:300px; text-align:center; }
  input { width:90%; padding:10px; margin:10px 0; border-radius:4px; border:1px solid #ddd; display:block; margin:auto; }
  button { padding:10px 20px; border:none; background:#007BFF; color:white; border-radius:4px; cursor:pointer; }
  button:hover { background:#0056b3; }
  p { margin-top:15px; font-weight:bold; }
  p.error { color:red; }
</style>
</head>
<body>

<div id="login-container">
  <h2>Login</h2>
  <input type="email" id="email" placeholder="Email">
  <input type="password" id="password" placeholder="Password">
  <button id="login-btn">Login</button>
  <p id="message"></p>
</div>

<script>
const loginBtn = document.getElementById('login-btn');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const message = document.getElementById('message');

loginBtn.addEventListener('click', () => {
  const email = emailInput.value;
  const password = passwordInput.value;

  fetch('http://localhost:5000/login', {
    method: 'POST',
    headers: {'Content-Type':'application/json'},
    body: JSON.stringify({ email, password })
  })
  .then(res => res.json())
  .then(data => {
    if(data.token){
      localStorage.setItem('token', data.token);
      message.textContent = 'Login successful! Redirecting...';
      message.classList.remove('error');
      setTimeout(() => {
        window.location.href = 'dashboard.html';
      }, 1000);
    } else {
      message.textContent = data.message;
      message.classList.add('error');
    }
  })
  .catch(err => {
    message.textContent = 'Error logging in';
    message.classList.add('error');
    console.error(err);
  });
});
</script>

</body>
</html>
